@page "/register"

<PageTitle>Cadastro</PageTitle>

<MudGrid Justify="Justify.Center">
    <MudItem xs="12" sm="6" md="5" lg="5">
        <MudPaper Class="d-flex justify-center flex-grow-1 gap-4" Elevation="0">
            <MudImage Src="images/ProgrammersInside.png" Width="270" Height="270" Elevation="0" Class="rounded-lg"/>
        </MudPaper>
    </MudItem>
</MudGrid>

<MudForm @ref="form">
    <MudGrid Justify="Justify.Center">
        <MudItem xs="12" sm="6" md="5" lg="5">
            <MudPaper Class="d-flex pa-1" Elevation="0">
                <MudTextField Label="E-mail" Variant="Variant.Outlined" @bind-Value="Email" Required="true" RequiredError="O e-mail é obrigatório"
                              Validation="@(new EmailAddressAttribute() { ErrorMessage = "O e-mail deve ser válido" })"/>
            </MudPaper>

            <MudPaper Class="d-flex pa-1" Elevation="0">
                <MudTextField
                    Required="true" RequiredError="Senha é obrigatório"
                    @bind-Value="Password"
                    Label="Senha"
                    Variant="Variant.Outlined"
                    InputType="@PasswordInput"
                    Adornment="Adornment.End"
                    AdornmentIcon="@PasswordInputIcon"
                    OnAdornmentClick="ShowPassword"
                    AdornmentAriaLabel="Show Password"/>
            </MudPaper>

            <MudPaper Class="d-flex pa-1" Elevation="0">
                <MudTextField Label="Nome" Variant="Variant.Outlined" @bind-Value="Name" Required="true" RequiredError="Nome é obrigatório"/>
            </MudPaper>

            <MudPaper Class="d-flex pa-1" Style="gap: 1rem" Elevation="0">
                <MudDatePicker Label="Data de Nascimento" Variant="Variant.Outlined" Editable="true" @bind-Date="Dob" Required="true" RequiredError="Gênero é obrigatório" Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy"/>
                <MudSelect Variant="Variant.Outlined" @bind-Value="Gender" Label="Gênero" Required="true" RequiredError="O e-mail é obrigatório">
                    @foreach (var gender in GenderOptions)
                    {
                        <MudSelectItem Value="gender">@gender</MudSelectItem>
                    }
                </MudSelect>
            </MudPaper>

            <MudPaper Class="d-flex pa-1" Style="gap: 1rem" Elevation="0">
                <MudSelect Required="true" RequiredError="Este campo é obrigatório" Variant="Variant.Outlined" @bind-Value="PlayAt" Label="Onde você joga?">
                    @foreach (var playAt in PlayAtOptions)
                    {
                        <MudSelectItem Value="playAt">@playAt</MudSelectItem>
                    }
                </MudSelect>
                <MudSelect Required="true" RequiredError="Este campo é obrigatório" Variant="Variant.Outlined" @bind-Value="FavoriteGame" Label="Jogo Favorito">
                    @foreach (var favoriteGame in FavoriteGameOptions)
                    {
                        <MudSelectItem Value="favoriteGame">@favoriteGame</MudSelectItem>
                    }
                </MudSelect>
            </MudPaper>


            @if (!string.IsNullOrEmpty(Error))
            {
                <MudAlert Severity="Severity.Error" Elevation="0" Icon="@Icons.Material.Filled.Error">@Error</MudAlert>
            }

            <MudPaper Class="d-flex pa-4" Elevation="0">
                <MudButton FullWidth="true" Color="Color.Primary" Variant="Variant.Filled" @onclick="() => RegisterUser()">Cadastrar</MudButton>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudForm>